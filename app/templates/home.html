<!-- home.html -->
{% extends 'base.html' %}
{% block title %}DRE - Home{% endblock %}

{% block content %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<div class="row mt-4 justify-content-center">
  <div class="col-md-6 text-center">
    <h5 class="text-center mb-3">Saldo por Banco</h5>
    <canvas id="bankChart"></canvas>
  </div>
  <div class="col-md-6 text-center">
    <h5 class="text-center mb-3">Movimentações por Plano de Contas</h5>
    <canvas id="accountingChart"></canvas>
  </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    var bankData = JSON.parse('{{ bank_chart_data|safe }}');
    var accountingData = JSON.parse('{{ accounting_chart_data|safe }}');

    new Chart(document.getElementById("bankChart"), {
      type: 'bar',
      data: {
        labels: bankData.labels,
        datasets: [{
          label: 'Saldo (R$)',
          data: bankData.values,
          backgroundColor: 'rgba(75, 192, 192, 0.6)',
          borderColor: 'rgba(75, 192, 192, 1)',
          borderWidth: 1
        }]
      },
      options: {
        scales: {
          y: {
            beginAtZero: true
          }
        }
      }
    });

    new Chart(document.getElementById("accountingChart"), {
      type: 'pie',
      data: {
        labels: accountingData.labels,
        datasets: [{
          data: accountingData.values,
          backgroundColor: [
            'rgba(255, 99, 132, 0.6)',
            'rgba(54, 162, 235, 0.6)',
            'rgba(255, 206, 86, 0.6)',
            'rgba(75, 192, 192, 0.6)',
            'rgba(153, 102, 255, 0.6)'
          ],
          borderWidth: 1
        }]
      },
      options: {
        plugins: {
          legend: {
            position: 'right'
          }
        }
      }
    });
  });
</script>

{% endblock %}
